<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portable WBS Tool</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="./src/style.css">
</head>

<body>
  <div id="app">
    <!-- Login Container -->
    <div id="login-container"></div>

    <!-- App Container -->
    <div id="app-container">
      <!-- Header -->
      <div id="header-container"></div>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Task List Panel (2/3) -->
        <section class="task-panel">
          <div class="panel-header">
            <span class="panel-title">タスク一覧</span>
          </div>
          <div class="task-table-container" id="task-list-container">
            <!-- Task list rendered here -->
          </div>
        </section>

        <!-- Gantt Chart Panel (1/3) -->
        <section class="gantt-panel">
          <div class="panel-header">
            <span class="panel-title">ガントチャート</span>
          </div>
          <div class="gantt-container" id="gantt-container">
            <!-- Gantt chart rendered here -->
          </div>
        </section>
      </main>
    </div>

    <!-- Task Modal -->
    <div class="modal" id="task-modal">
      <div class="modal__content">
        <div class="modal__header">
          <h2 class="modal__title">新規タスク</h2>
          <button class="modal__close" data-close-modal="task-modal">×</button>
        </div>
        <div class="modal__body">
          <form id="task-form">
            <input type="hidden" id="task-id">
            <div class="form-group">
              <label class="form-label" for="task-name">タスク名 *</label>
              <input type="text" id="task-name" class="form-input" placeholder="タスク名を入力" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="task-start">開始日 *</label>
                <input type="date" id="task-start" class="form-input" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="task-end">終了日 *</label>
                <input type="date" id="task-end" class="form-input" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label" for="task-assignee">担当者</label>
              <select id="task-assignee" class="form-select">
                <option value="">未割り当て</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="task-parent">親タスク</label>
              <select id="task-parent" class="form-select">
                <option value="">なし（ルートタスク）</option>
              </select>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="task-progress">進捗率 (%)</label>
                <input type="number" id="task-progress" class="form-input" min="0" max="100" value="0">
              </div>
              <div class="form-group">
                <label class="form-label">&nbsp;</label>
                <label class="form-checkbox">
                  <input type="checkbox" id="task-milestone">
                  <span>マイルストーン</span>
                </label>
              </div>
            </div>
          </form>
        </div>
        <div class="modal__footer">
          <button class="btn btn--secondary" data-close-modal="task-modal">キャンセル</button>
          <button class="btn btn--danger" id="delete-task-btn" style="display: none;">削除</button>
          <button class="btn btn--primary" id="save-task-btn">保存</button>
        </div>
      </div>
    </div>

    <!-- Progress Modal -->
    <div class="modal" id="progress-modal">
      <div class="modal__content">
        <div class="modal__header">
          <h2 class="modal__title">進捗編集</h2>
          <button class="modal__close" data-close-modal="progress-modal">×</button>
        </div>
        <div class="modal__body">
          <input type="hidden" id="progress-task-id">
          <p style="margin-bottom: 16px;">
            <strong id="progress-task-name"></strong>
          </p>
          <div class="form-group">
            <label class="form-label" for="progress-value">進捗率 (%)</label>
            <input type="number" id="progress-value" class="form-input" min="0" max="100" value="0">
          </div>
        </div>
        <div class="modal__footer">
          <button class="btn btn--secondary" data-close-modal="progress-modal">キャンセル</button>
          <button class="btn btn--primary" id="save-progress-btn">保存</button>
        </div>
      </div>
    </div>

    <!-- User Modal -->
    <div class="modal" id="user-modal">
      <div class="modal__content">
        <div class="modal__header">
          <h2 class="modal__title">ユーザー管理</h2>
          <button class="modal__close" data-close-modal="user-modal">×</button>
        </div>
        <div class="modal__body">
          <div id="user-list" class="user-list">
            <!-- User list rendered here -->
          </div>
          <div class="form-group">
            <label class="form-label" for="new-user-name">新規ユーザー追加</label>
            <div style="display: flex; gap: 10px;">
              <input type="text" id="new-user-name" class="form-input" placeholder="ユーザー名">
              <button class="btn btn--primary" id="add-user-btn">追加</button>
            </div>
          </div>
        </div>
        <div class="modal__footer">
          <button class="btn btn--secondary" data-close-modal="user-modal">閉じる</button>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>
  </div>

  <script type="module" src="./src/main.ts"></script>
</body>

</html>
